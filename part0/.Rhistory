install.packages("RSQLite")
library(rpart)
library(rpart.ploy)
library(rpart.plot)
data(ptitanic)
tree <- rpart(survived ~ ., data=ptitanic, cp=.02)
# cp=.02 because want small tree for demo
old.par <- par(mfrow=c(2,2))
# put 4 figures on one page
rpart.plot(tree, main="default rpart.plot\n(type = 0, extra = 0)")
prp(tree, main="type = 4, extra = 6", type=4, extra=6, faclen=0)
# faclen=0 to print full factor names
rpart.plot(tree, main="extra = 106,  under = TRUE", extra=106, under=TRUE, faclen=0)
# the old way for comparison
plot(tree, uniform=TRUE, compress=TRUE, branch=.2)
text(tree, use.n=TRUE, cex=.6, xpd=NA) # cex is a guess, depends on your window size
title("rpart.plot for comparison", cex=.6)
par(old.par)
install.packages("drat")；drat:::addRepo("dmlc");install.packages("mxnet")
install.packages("drat")；drat:::addRepo("dmlc");install.packages("mxnet")
drat:::addRepo("dmlc")
install.packages("mxnet")
y
install.packages("mxnet")
library(sigma)
install.packages("sigma")
devtools::install_github("jjallaire/sigma")
library(sigma)
sigma(system.file("examples/ediaspora.gexf.xml", package = "sigma"))
library(eLine)
library(recharts)
?eLine
eLine(WorldPhones)
install.packages("yaml")
a
a =1
a
log(300,10)
(2520+2887)*12*15
log10(300)
log10(3000000)
log10(2000000)
log10(1000000)
log10(8000000)
log10(800000)
iris
iris[151,]<-rep(NA,5)
iris
iris[is.na(iris[,c(1,2)]),
]
iris[is.na(iris[,c(1,2)]),]<-0
iris[is.na(iris[,c(1)]),]<-0
iris[is.na(iris[,c(1)]),]
is.na(iris[,1])
iris[,1]
120*365
log10(80)
log10(800000)
log10(77.3877)
log10(773877)
logo        : ./pic/ctrip.png
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
library(REmap)
library(APItools)
APIStore.init("1495c3e9b46f09c3c5a4f69b0e6c6e90")
function1 = APIStore("http://apistore.baidu.com/apiworks/servicedetail/478.html")
function1(city = "上海")
sessionInfo()
?quantile
data = fread("Manualoutput2015-11-30.csv")
library(data.table)
data = fread("Manualoutput2015-11-30.csv")
Data=fread("[2015.12]autoRoom/data/train_data_0921_production.csv",sep='\t',header=T,na.strings='NULL')
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1587633154
1587636058
1587632052
1587625600
1587637130
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel&CancelRefundType=-1")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1587633154
1587636058
1587632052
1587625600
1587637130
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1587633154
1587636058
1587632052
1587625600
1587637130
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1588612238
1588612648
1588612385
1603495525
1604641411
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1588612238
1588612648
1588612385
1603495525
1604641411
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1588612238
1588612648
1588612385
1603495525
1604641411
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1603485226
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
index = sample(1:5,100,replace=T)
imdex
index
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1588613794
1604632692
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
dir()
??gbm
130221203/8000
1557771/800
221*8000
15385598/200
15385598/130826
13000/8000
200/16
16*35
Sys.Date()-1000
library(REmap)
remapB(markLineData = demoC)
27/37
229/276
276-229
library(REmap)
origin=c('安徽','北京','甘肃','广东')
desitination=c('三亚','三亚','三亚','三亚')
tooltip=c(10655,93109,6840,79012)
dat=data.frame(origin,desitination,tooltip)
out = remap(dat,title = "REmap实例数据",subtitle = "theme:Dark")
plot(out)
dat=data.frame(origin,desitination)
out = remap(dat,title = "REmap实例数据",subtitle = "theme:Dark")
plot(out)
dat=data.frame(origin,desitination,tooltip)
out = remapB(markLineData = dat,title = "REmap实例数据",subtitle = "theme:Dark")
plot(out)
out = remapB(markLineData = dat,markPointData = unique(dat[,1:2]),title = "REmap实例数据",subtitle = "theme:Dark")
unique(dat[,1:2])
out = remapB(markLineData = dat,
markPointData = unique(dat[,1]),
title = "REmap实例数据",subtitle = "theme:Dark")
out = remapB(markLineData = dat,
markPointData = unique(origin,desitination),
title = "REmap实例数据",subtitle = "theme:Dark")
?remapB
geoData  = get_geo_position(unique(c(origin,desitination)))
out = remapB(markLineData = dat,
geoData = geoData,
title = "REmap实例数据",subtitle = "theme:Dark")
geoData  = get_geo_position(unique(demoC[demoC==demoC]))
# this may take some time,be patient~
remapB(markLineData = demoC,geoData = geoData)
remapB(markLineData = demoC,color = "Blue",geoData = geoData)
debug(remapB)
out = remapB(markLineData = dat,
geoData = geoData,
title = "REmap实例数据",subtitle = "theme:Dark")
out = remapB(markLineData = dat,
geoData = geoData,
title = "REmap实例数据",subtitle = "theme:Dark")
markLineLogi
markLineLogi & markPointLogi & !geoDataLogi
markLineLogi
markLineStr(markLineData, markLineTheme,
geoData)
markLineData
debug(markLineStr)
debug(REmap:::markLineStr)
out = remapB(markLineData = dat,
geoData = geoData,
title = "REmap实例数据",subtitle = "theme:Dark")
25/111
devtools::install_github("lchiffon/REmap")
library(REmap)
remap.init()
devtools::install_github("lchiffon/REmap")
library(REmap)
origin=c('安徽','北京','甘肃','广东')
desitination=c('三亚','三亚','三亚','三亚')
tooltip=c(10655,93109,6840,79012)
dat=data.frame(origin,desitination,tooltip)
geoData  = get_geo_position(unique(c(origin,desitination)))
out = remapB(markLineData = dat,
geoData = geoData,
title = "REmap实例数据",subtitle = "theme:Dark")
deplot(out)
install.packages("digest")
install.packages("digest")
library(REmap\)
library(REmap)
library(REmap)
origin=c('安徽','北京','甘肃','广东')
desitination=c('三亚','三亚','三亚','三亚')
tooltip=c(10655,93109,6840,79012)
dat=data.frame(origin,desitination,tooltip)
geoData  = get_geo_position(unique(c(origin,desitination)))
out = remapB(markLineData = dat,
geoData = geoData,
title = "REmap实例数据",subtitle = "theme:Dark")
deplot(out)
plot(out)
devtools::install_github("lchiffon/REmap")
6677/18
8853/18
Sys.Date()-200
library(XML)
readHTMLTable("http://www.cbooo.cn/year?year=2015")
readHTMLTable("http://www.cbooo.cn/year?year=2015",encoding = "utf-8")
url <- "http://www.cbooo.cn/year?year=2015"
url <- htmlParse(url, encoding="UTF-8")#解析文件，需指定encoding为"UTF-8"，否则乱码
tables <- readHTMLTable(url)
tables[[1]]
0.36*0.56
0.45*0.45
0.49*0.45
0.49*0.45*0.9
0.36*0.56*0.96
82/91
20-17
766/14429
773/12011
library("arules", lib.loc="E:/Program Files/R/R-3.2.2/library")
data(Epub)
Epub
Epub[1,]
as.list(Epub[1,])
as.vector(Epub[1,])
Epub[1,]@data
a_list <- list(
c("a","b","c"),
c("a","b"),
c("a","b","d"),
c("c","e"),
c("a","b","d","e")
)
## set transaction names
names(a_list) <- paste("Tr",c(1:5), sep = "")
a_list
class(Epub)
install.packages("dummy")
library(dummy)
letters <- c( "a", "a", "b", "c", "d", "e", "f", "g", "h", "b", "b" )
dummy( as.character(letters) )
dummy( letters[1:6] )
?dummy
(traindata <- data.frame(var1=as.factor(c("a","b","b","c")),
var2=as.factor(c(1,1,2,3)),
var3=c("val1","val2","val3","val3"),
stringsAsFactors=FALSE))
(newdata <- data.frame(var1=as.factor(c("a","b","b","c","d","d")),
var2=as.factor(c(1,1,2,3,4,5)),
var3=c("val1","val2","val3","val3","val4","val4"),
stringsAsFactors=FALSE))
(dummies_train <- dummy(x=traindata))
devtools::install_github("lchiffon/slidify")
library(slidify)
install.packages("stringr")
install.packages("stringr")
library(slidify)
author("new")
setwd("H:/Ctrip task/[2016.02]Coupon/Coupon")
slidify("index.Rmd")
Sys.setlocale("LC_CTYPE","chs")
slidify("index.Rmd")
devtools::install_github("lchiffon/slidify")
slidify("index.Rmd")
library(slidify)
slidify("index.Rmd")
devtools::install_github("lchiffon/slidify")
library(slidify)
slidify("index.Rmd")
debug(slidify:::to_deck)
slidify("index.Rmd")
meta
lapply(meta,function(x){
if(class(x)=="charchter" && length(x)!=1) return(x)
return(iconv(x,"UTF-8","UTF-8"))
})
class(x$url)
class(meta$url)
class(meta$url)=="character"
lapply(meta,function(x){
if(class(x)!="charchter" | length(x)!=1) return(x)
return(iconv(x,"UTF-8","UTF-8"))
})
class(meta$title)
iconv(meta$title, "UTF-8", "UTF-8")
x =metap[1]
x =meta[1]
x
x =meta[[1]]
class(x)!="charchter" | length(x)!=1
class(x)!="charchter"
sapply(meta,function(x){
if(class(x)!="charchter" | length(x)!=1) return(x)
return(iconv(x,"UTF-8","UTF-8"))
})
sapply(meta,function(x){
class(x)
})
sapply(meta,function(x){
if(class(x)=="list" | length(x)!=1) return(x)
return(iconv(x,"UTF-8","UTF-8"))
})
devtools::install_github("lchiffon/slidify")
library(slidify)
slidify("index.Rmd")
slidify("index.Rmd")
library(slidify)
slidify("index.Rmd")
devtools::install_github("lchiffon/slidify")
devtools::install_github("lchiffon/slidify")
install.packages("stringi")
devtools::install_github("lchiffon/slidify")
setwd("C:/Users/Administrator/Desktop/course/[2016.02]Coupon/Coupon")
slidify("index.Rmd")
library(slidify)
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
slidify("index.Rmd")
iris
library(reshape2)
dcast(data = iris,formula = Species~.)
names(iris)
dcast(data = iris,formula = Species~Sepal.Length)
melt(data = iris)
